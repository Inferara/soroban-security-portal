using SorobanSecurityPortalApi.Models.ViewModels;
using AutoMapper;
using SorobanSecurityPortalApi.Models.DbModels;

namespace SorobanSecurityPortalApi.Models.Mapping;

public class VulnerabilityModelProfile : Profile
{
    public VulnerabilityModelProfile()
    {
        CreateMap<VulnerabilityViewModel, VulnerabilityModel>()
            .ForMember(dst => dst.ReportId, opt => opt.MapFrom(v => v.ReportId));
        CreateMap<VulnerabilityModel, VulnerabilityViewModel>()
            .ForMember(dst => dst.AuditorName, opt => opt.MapFrom(v => v.Report!.Auditor!.Name))
            .ForMember(dst => dst.AuditorId, opt => opt.MapFrom(v => v.Report!.Auditor!.Id))
            .ForMember(dst => dst.CompanyName, opt => opt.MapFrom(v => v.Report!.Protocol!.Company!.Name))
            .ForMember(dst => dst.CompanyId, opt => opt.MapFrom(v => v.Report!.Protocol!.Company!.Id))
            .ForMember(dst => dst.ProtocolName, opt => opt.MapFrom(v => v.Report!.Protocol!.Name))
            .ForMember(dst => dst.ProtocolId, opt => opt.MapFrom(v => v.Report!.Protocol!.Id))
            .ForMember(dst => dst.ReportName, opt => opt.MapFrom(v => v.Report!.Name))
            .ForMember(dst => dst.ReportId, opt => opt.MapFrom(v => v.Report!.Id));
    }
}